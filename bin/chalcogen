#!/usr/bin/env ruby
begin
    require "rubygems"
    require "chalcogen"
rescue LoadError => e
    puts "Could not load Chalcogen."
    raise e
end
require "thor"

module Chalcogen
    class CLI < Thor
        desc "local_run CONFIG", "Run Chalcogen locally"
        def local_run(config)
            # Load config
            begin
                require config
            rescue LoadError => e
                puts "Could not load the Chalcogen configuration!"
                raise e
            end

            # Run Chalcogen
            Chalcogen.run
            Chalcogen.make_gallery(Chalcogen.path)
        end
    end
end

Chalcogen::CLI.start(ARGV)
